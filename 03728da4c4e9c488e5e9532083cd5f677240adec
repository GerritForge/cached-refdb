{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fbf37b9f_8f17416a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-02-02T15:18:42Z",
      "side": 1,
      "message": "```suggestion\nIt also simplifies interfaces and allows to centralize the management of\n```",
      "range": {
        "startLine": 12,
        "startChar": 8,
        "endLine": 12,
        "endChar": 16
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "611db84c_e3b70173",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 12,
      "author": {
        "id": 1012541
      },
      "writtenOn": "2026-02-03T17:19:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fbf37b9f_8f17416a",
      "range": {
        "startLine": 12,
        "startChar": 8,
        "endLine": 12,
        "endChar": 16
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34337487_0b189068",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1012541
      },
      "writtenOn": "2026-01-29T11:46:40Z",
      "side": 1,
      "message": "@geminica.programs@gmail.com any reason why we weren\u0027t using a LoadingCache here?",
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c7f7d61_2cde2092",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1019121
      },
      "writtenOn": "2026-01-30T14:11:00Z",
      "side": 1,
      "message": "can\u0027t remember clearly but I guess to have an option to preload it without reaching to the underlying refdb each time? for instance this [change](https://gerrit-review.googlesource.com/c/modules/cached-refdb/+/341542) sounds like trace of it ðŸ¤”",
      "parentUuid": "34337487_0b189068",
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c64c761_cf529f75",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2026-02-04T15:29:57Z",
      "side": 1,
      "message": "Ah, @geminica.programs@gmail.com is right: if you load the entries one-by-one is going to be a lot more expensive than just preloading the whole thing.\n\nHowever, I believe you can still put a value on the cache, even if it\u0027s a loading cache, or am I mistaken?",
      "parentUuid": "4c7f7d61_2cde2092",
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52172e94_bdb76337",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1012541
      },
      "writtenOn": "2026-02-05T18:06:33Z",
      "side": 1,
      "message": "\u003e However, I believe you can still put a value on the cache, even if it\u0027s a loading cache, or am I mistaken?\n\nI have introduced a `put()` method for that purpose.\nIt is used in `getRefs()` as follow:\n\n```\n@Override\npublic List\u003cRef\u003e getRefs() throws IOException {\n  List\u003cRef\u003e allRefs \u003d delegate.getRefs();\n  for (Ref ref : allRefs) {\n    refsCache.put(repo.getProjectName(), ref);\n  }\n  return allRefs;\n}\n\n```",
      "parentUuid": "7c64c761_cf529f75",
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f2a667c9_8b202021",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1012541
      },
      "writtenOn": "2026-02-06T14:36:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "52172e94_bdb76337",
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fad15bee_df529310",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/CachedRefDatabase.java",
        "patchSetId": 9
      },
      "lineNbr": 34,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-02-02T15:18:42Z",
      "side": 1,
      "message": "Following from the same comment on the previous change, should refsCache be renamed to refsByNameCache?\n\nOr we rename its type.",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 34,
        "endChar": 48
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9251385_906ff5b0",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/CachedRefDatabase.java",
        "patchSetId": 9
      },
      "lineNbr": 34,
      "author": {
        "id": 1012541
      },
      "writtenOn": "2026-02-03T17:19:01Z",
      "side": 1,
      "message": "Possibly, but I would do it in a separate change.",
      "parentUuid": "fad15bee_df529310",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 34,
        "endChar": 48
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9024d62f_2041a15e",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/CachedRefDatabase.java",
        "patchSetId": 9
      },
      "lineNbr": 34,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-02-04T13:32:54Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "f9251385_906ff5b0",
      "range": {
        "startLine": 34,
        "startChar": 2,
        "endLine": 34,
        "endChar": 48
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc74ed7f_7a49272b",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/NoOpRefByNameCache.java",
        "patchSetId": 9
      },
      "lineNbr": 33,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-02-02T15:18:42Z",
      "side": 1,
      "message": "I know this is the NoOp implementation, but why are we now opening the repository on disk for every call?",
      "range": {
        "startLine": 33,
        "startChar": 4,
        "endLine": 33,
        "endChar": 85
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1dd910b8_c114933e",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/NoOpRefByNameCache.java",
        "patchSetId": 9
      },
      "lineNbr": 33,
      "author": {
        "id": 1012541
      },
      "writtenOn": "2026-02-03T17:19:01Z",
      "side": 1,
      "message": "This is the noop implementation and it is only used in the tests, so it doesn\u0027t matter.\n\nHaving said that, in the `RefByNameLoader::loader` we do open the repository more often. It might be worth running some benchmark and see if it is actually a problem before targeting it. WDYT?",
      "parentUuid": "cc74ed7f_7a49272b",
      "range": {
        "startLine": 33,
        "startChar": 4,
        "endLine": 33,
        "endChar": 85
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86a80294_16e5d237",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/NoOpRefByNameCache.java",
        "patchSetId": 9
      },
      "lineNbr": 33,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-02-04T13:32:54Z",
      "side": 1,
      "message": "Yeah, assume this will be covered in the benchmarks we\u0027re already doing anyway.",
      "parentUuid": "1dd910b8_c114933e",
      "range": {
        "startLine": 33,
        "startChar": 4,
        "endLine": 33,
        "endChar": 85
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8356f6b4_0c90d1cc",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/RefByNameCacheImpl.java",
        "patchSetId": 9
      },
      "lineNbr": 57,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-02-02T15:18:42Z",
      "side": 1,
      "message": "Worth making a record class here? Gives it a bit more structure.\n\nThe handling of any parsing errors should be done in parseKey.",
      "range": {
        "startLine": 57,
        "startChar": 6,
        "endLine": 57,
        "endChar": 33
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54f0f3aa_8eaa19ec",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/RefByNameCacheImpl.java",
        "patchSetId": 9
      },
      "lineNbr": 57,
      "author": {
        "id": 1012541
      },
      "writtenOn": "2026-02-03T17:19:01Z",
      "side": 1,
      "message": "Agree, but I wanted to keep the refactoring as small as possible. Happy to do it in a followup change.",
      "parentUuid": "8356f6b4_0c90d1cc",
      "range": {
        "startLine": 57,
        "startChar": 6,
        "endLine": 57,
        "endChar": 33
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8501b980_3a346db9",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/cachedrefdb/RefByNameCacheImpl.java",
        "patchSetId": 9
      },
      "lineNbr": 57,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-02-04T13:32:54Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "54f0f3aa_8eaa19ec",
      "range": {
        "startLine": 57,
        "startChar": 6,
        "endLine": 57,
        "endChar": 33
      },
      "revId": "03728da4c4e9c488e5e9532083cd5f677240adec",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}